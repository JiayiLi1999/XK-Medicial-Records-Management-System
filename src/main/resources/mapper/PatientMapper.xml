<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sufer.mapper.PatientMapper">
    <resultMap id="PatientMapping" type="Patient">
        <id column="patient_id" property="patientId"></id>
        <result column="patient_name" property="patientName"></result>
        <result column="doctor_id" property="doctorId"></result>
        <result column="gender" property="gender"></result>
        <result column="age" property="age"></result>
        <result column="contact" property="contact"></result>
        <result column="IDcard_No" property="IDCardNo"></result>
        <result column="address_district" property="addressDistrict"></result>
        <result column="address_city" property="addressCity"></result>
        <result column="address_street" property="addressStreet"></result>
        <result column="related_name" property="relatedName"></result>
        <result column="related_phonenumber" property="relatedPhoneNumber"></result>
        <result column="height" property="height"></result>
        <result column="weight" property="weight"></result>
        </resultMap>

    <parameterMap id="PatientParaMapping" type="Patient">
        <parameter resultMap="patient_name" property="patientName"></parameter>
        <parameter resultMap="doctor_id" property="doctorId"></parameter>
        <parameter resultMap="gender" property="gender"></parameter>
        <parameter resultMap="age" property="age"></parameter>
        <parameter resultMap="contact" property="contact"></parameter>
        <parameter resultMap="IDcard_No" property="IDCardNo"></parameter>
        <parameter resultMap="address_city" property="addressCity"></parameter>
        <parameter resultMap="address_district" property="addressDistrict"></parameter>
        <parameter resultMap="address_street" property="addressStreet"></parameter>
        <parameter resultMap="related_name" property="relatedName"></parameter>
        <parameter resultMap="related_phonenumber" property="relatedPhoneNumber"></parameter>
        <parameter resultMap="height" property="height"></parameter>
        <parameter resultMap="weight" property="weight"></parameter>
    </parameterMap>

    <insert id="addPatient" keyProperty="patientId" useGeneratedKeys="true" parameterType="Patient" parameterMap="PatientParaMapping">
        insert into patient(patient_name,doctor_id, gender, age, contact, IDcard_No, address_city, address_district, address_street,related_name, related_phonenumber , height, weight)
        values (#{patientName} , #{doctorId}, #{gender}, #{age}, #{contact}, #{IDCardNo}, #{addressCity}, #{addressDistrict},#{addressStreet}, #{relatedName}, #{relatedPhoneNumber}, #{height}, #{weight})
    </insert>

    <select id="selectPatientById" resultType="Patient" resultMap="PatientMapping">
        select * from patient
        where patient_id = (#{id})
    </select>

    <select id="selectPatientByDoctorId" resultSets="Patient" resultMap="PatientMapping">
        select * from patient
        where doctor_id = (#{doctorId})
    </select>
</mapper>
